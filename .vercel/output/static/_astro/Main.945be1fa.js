import{j as e,r as h,l as f,i as j}from"./user.a01d3f51.js";import{N as b}from"./NavBar.1f9ff146.js";import{r as o}from"./index.6460afdd.js";import{U as N}from"./Alert.7865b1e8.js";import{u,t as v}from"./i18n.aa72860f.js";function w(){const{t:a,i18n:c}=u(),[m,t]=o.useState(""),[d,r]=o.useState(!1);async function x(n){n.preventDefault();const s=new FormData,p=document.getElementById("avatar").files[0],g=n.target[1].value,l=n.target[2].value;s.append("username",g),s.append("password",l),s.append("passwordConfirm",l),s.append("avatar",p),r(!0);const i=await h(s);i!=200?(r(!1),i.data?.data?.username?(t("username"),setTimeout(()=>{t("")},3e3)):i.data?.data?.avatar&&(t("avatar"),setTimeout(()=>{t("")},3e3))):(await f(g,l),window.location.href="/",r(!1))}return e.jsxs(e.Fragment,{children:[m!=""&&e.jsx(N,{error:m}),e.jsx("div",{className:"bg-primary",children:e.jsxs("div",{id:"mid",className:"hero min-h-screen",style:{backgroundImage:`url(/${localStorage.getItem("theme")||"dark"}-bg.svg)`},children:[e.jsx("div",{className:"hero-overlay bg-opacity-30"}),e.jsx("div",{className:"hero-content text-center text-neutral-content",children:e.jsx("div",{className:"max-w-md",children:e.jsx("div",{className:"card flex-shrink-0 w-screen max-w-sm shadow-2xl bg-base-100",children:e.jsxs("form",{onSubmit:x,className:"card-body",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:a("login-register.avatar")})}),e.jsx("input",{id:"avatar",type:"file",className:"text-base-content",required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:a("login-register.username")})}),e.jsx("input",{name:"username",autoComplete:"true",minLength:3,type:"text",className:"input input-bordered text-base-content",required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:a("login-register.password")})}),e.jsx("input",{name:"password",minLength:8,type:"password",className:"input input-bordered",required:!0}),e.jsx("label",{className:"label",children:e.jsx("a",{href:c.language=="tr"?"/giris":"/login",className:"label-text-alt link link-hover",children:a("login-register.login")})})]}),e.jsx("div",{className:"form-control mt-6",children:e.jsxs("button",{className:`btn ${d&&"btn-disabled"} btn-primary`,children:[" ",d&&e.jsx("span",{className:"loading"})," ",a("login-register.register")]})})]})})})})]})})]})}function C(){const{i18n:a}=u();return o.useEffect(()=>{j()&&(window.location.href="/"),v.themeChange(!1),(localStorage.getItem("language")||"en")=="tr"&&a.changeLanguage("tr")},[]),e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(w,{})]})}export{C as default};
